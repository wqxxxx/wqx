import{v as e,o as t,c as o,w as s,a as i,q as r,l as a,b as n,m as l,t as u,j as g,i as d,p as h,x as f,y as c,z as p,f as m,A as y,B as S}from"./index.43beff3c.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";function x(t,o){return e(t)?o:t}var F=T({name:"gui-refresh",props:{refreshText:{type:Array,default:function(){return["继续下拉刷新","松开手指开始刷新","数据刷新中","数据已刷新"]}},customClass:{type:Array,default:function(){return[["gui-color-gray"],["gui-color-gray"],["gui-primary-text"],["gui-color-green"]]}},refreshFontSize:{type:Number,default:28}},data:()=>({reScrollTop:0,refreshHeight:0,refreshY:0,refreshStatus:0,refreshTimer:0}),methods:{touchstart:function(e){this.reScrollTop>10||(this.refreshY=e.changedTouches[0].pageY)},touchmove:function(e){if(this.refreshStatus>=1)return null;if(!(this.reScrollTop>10)){var t=e.changedTouches[0].pageY-this.refreshY;(t/=2)>=50&&(t=50,this.refreshStatus=1),t>15&&(this.refreshHeight=t)}},touchend:function(e){if(!(this.reScrollTop>10))return this.refreshStatus<1?this.resetFresh():void(1==this.refreshStatus&&(this.refreshStatus=2,this.$emit("reload")))},scroll:function(e){this.reScrollTop=e.detail.scrollTop},endReload:function(){this.refreshStatus=3,setTimeout((()=>{this.resetFresh()}),1e3)},resetFresh:function(){return this.refreshHeight=0,this.refreshStatus=0,null},rotate360:function(){var e=this.$refs.loadingIcon;animation.transition(e,{styles:{transform:"rotate(7200deg)",transformOrigin:"center"},duration:2e4,timingFunction:"linear",needLayout:!1,delay:0})}},emits:["reload"]},[["render",function(e,h,f,c,p,m){const y=g,S=d;return t(),o(S,{class:"gui-page-refresh gui-flex gui-column gui-justify-content-center",style:a({height:p.refreshHeight+"px"})},{default:s((()=>[i(S,{style:a({height:f.refreshFontSize+"rpx"}),class:"gui-flex gui-row gui-justify-content-center gui-align-items-center"},{default:s((()=>[0==p.refreshStatus||1==p.refreshStatus?(t(),o(y,{key:0,class:r(["gui-icons gui-block",f.customClass[p.refreshStatus]]),style:a({fontSize:f.refreshFontSize+"rpx",width:f.refreshFontSize+"rpx",height:f.refreshFontSize+"rpx",lineHeight:f.refreshFontSize+"rpx"})},{default:s((()=>[n("")])),_:1},8,["class","style"])):l("",!0),2==p.refreshStatus?(t(),o(y,{key:1,ref:"loadingIcon",class:r(["gui-icons gui-block gui-text-center gui-rotate360",f.customClass[p.refreshStatus]]),style:a({fontSize:f.refreshFontSize+"rpx",width:f.refreshFontSize+"rpx",height:f.refreshFontSize+"rpx",lineHeight:f.refreshFontSize+"rpx"})},{default:s((()=>[n("")])),_:1},8,["class","style"])):l("",!0),3==p.refreshStatus?(t(),o(y,{key:2,class:r(["gui-icons",f.customClass[p.refreshStatus]]),style:a({fontSize:f.refreshFontSize+"rpx",width:f.refreshFontSize+"rpx",height:f.refreshFontSize+"rpx",lineHeight:f.refreshFontSize+"rpx"})},{default:s((()=>[n("")])),_:1},8,["class","style"])):l("",!0),i(y,{style:a([{"margin-left":"12rpx"},{fontSize:f.refreshFontSize+"rpx"}]),class:r(["gui-page-refresh-text gui-block",f.customClass[p.refreshStatus]])},{default:s((()=>[n(u(f.refreshText[p.refreshStatus]),1)])),_:1},8,["class","style"])])),_:1},8,["style"])])),_:1},8,["style"])}],["__scopeId","data-v-05d6f57c"]]);var v=T({name:"gui-loadmore",props:{loadMoreText:{type:Array,default:function(){return["","数据加载中","已加载全部数据","暂无数据"]}},customClass:{type:Array,default:function(){return["gui-color-gray"]}},loadMoreFontSize:{type:String,default:"26rpx"},status:{type:Number,default:0}},data:()=>({loadMoreStatus:0,hidden:!1}),created:function(){this.loadMoreStatus=this.status,this.status},methods:{loading:function(){this.loadMoreStatus=1},stoploadmore:function(){this.loadMoreStatus=0},stopLoadmore:function(){this.loadMoreStatus=0},nomore:function(){this.loadMoreStatus=2},empty:function(){this.loadMoreStatus=3},hide:function(){this.hidden=!0},rotate360:function(){var e=this.$refs.loadingiconforloadmore;animation.transition(e,{styles:{transform:"rotate(7200deg)"},duration:2e4,timingFunction:"linear",needLayout:!1,delay:0})},tapme:function(){0==this.loadMoreStatus&&this.$emit("tapme")}},emits:["tapme"]},[["render",function(e,f,c,p,m,y){const S=g,T=d;return t(),o(T,{class:"gui-load-more gui-flex gui-row gui-align-items-center gui-justify-content-center",onClick:h(y.tapme,["stop","prevent"])},{default:s((()=>[0==m.loadMoreStatus?(t(),o(T,{key:0},{default:s((()=>[i(S,{class:"gui-block",style:a({height:c.loadMoreFontSize})},null,8,["style"])])),_:1})):l("",!0),1==m.loadMoreStatus?(t(),o(T,{key:1,class:"gui-load-more-icon",ref:"loadingiconforloadmore"},{default:s((()=>[i(S,{class:r([c.customClass,"gui-icons gui-rotate360 gui-block"]),style:a({fontSize:c.loadMoreFontSize})},{default:s((()=>[n("")])),_:1},8,["class","style"])])),_:1},512)):l("",!0),i(S,{class:r(["gui-block",c.customClass]),style:a({fontSize:c.loadMoreFontSize})},{default:s((()=>[n(u(c.loadMoreText[m.loadMoreStatus]),1)])),_:1},8,["class","style"])])),_:1},8,["onClick"])}],["__scopeId","data-v-8c43515e"]]);var z=T({name:"gui-iphone-bottom",props:{height:{type:String,default:"60rpx"},isSwitchPage:{type:Boolean,default:!1},customClass:{type:Array,default:function(){return["gui-bg-transparent"]}}},data:()=>({need:!1}),created:function(){if(!this.isSwitchPage){var e=f();if(e.model){e.model=e.model.replace(" ",""),e.model=e.model.toLowerCase();var t=e.model.indexOf("iphonex");t>5&&(t=-1);var o=e.model.indexOf("iphone1");o>5&&(o=-1),-1==t&&-1==o||(this.need=!0)}}}},[["render",function(e,s,i,n,u,g){const h=d;return u.need?(t(),o(h,{key:0,style:a({height:i.height}),class:r(i.customClass)},null,8,["style","class"])):l("",!0)}]]);var C=T({name:"gui-page-loading",props:{},data:()=>({isLoading:!1,BindingXObjs:[null,null,null],AnimateObjs:[null,null,null],animateTimer:800,intervalID:null}),watch:{},methods:{stopfun:function(e){return e.stopPropagation(),null},open:function(){this.isLoading=!0},close:function(){setTimeout((()=>{this.isLoading=!1}),100)},getRefs:function(e,t,o){if(t>=50)return o(this.$refs[e]),!1;var s=this.$refs[e];s?o(s):(t++,setTimeout((()=>{this.getRefs(e,t,o)}),100))}}},[["render",function(e,r,a,n,u,g){const f=d;return u.isLoading?(t(),o(f,{key:0,class:"gui-page-loading gui-flex gui-nowrap gui-align-items-center gui-justify-content-center gui-page-loading-bg",onClick:h(g.stopfun,["stop"]),onTouchmove:h(g.stopfun,["stop","prevent"])},{default:s((()=>[i(f,{class:"gui-page-loading-point gui-flex gui-rows gui-justify-content-center"},{default:s((()=>[i(f,{class:"gui-page-loading-points animate1 gui-page-loading-color"}),i(f,{class:"gui-page-loading-points animate2 gui-page-loading-color"}),i(f,{class:"gui-page-loading-points animate3 gui-page-loading-color"})])),_:1})])),_:1},8,["onClick","onTouchmove"])):l("",!0)}],["__scopeId","data-v-5179bc02"]]);var M=T({name:"gui-page",props:{fullPage:{type:Boolean,default:!1},customHeader:{type:Boolean,default:!1},headerClass:{type:Array,default:function(){return[]}},isHeaderSized:{type:Boolean,default:!0},statusBarClass:{type:Array,default:function(){return[]}},customFooter:{type:Boolean,default:!1},footerClass:{type:Array,default:function(){return[]}},footerSpaceClass:{type:Array,default:function(){return["gui-bg-gray","gui-dark-bg-level-2"]}},pendantClass:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isSwitchPage:{type:Boolean,default:!1},fixedTopClass:{type:Array,default:function(){return[]}},refresh:{type:Boolean,default:!1},refreshText:{type:Array,default:function(){return["继续下拉刷新","松开手指开始刷新","数据刷新中","数据已刷新"]}},refreshClasses:{type:Array,default:function(){return[["gui-color-gray"],["gui-color-gray"],["gui-primary-text"],["gui-color-green"]]}},refreshFontSize:{type:Number,default:26},loadmore:{type:Boolean,default:!1},loadMoreText:{type:Array,default:function(){return["","数据加载中","已加载全部数据","暂无数据"]}},loadMoreClass:{type:Array,default:function(){return["gui-color-gray"]}},loadMoreFontSize:{type:String,default:"26rpx"},loadMoreStatus:{type:Number,default:1},apiLoadingStatus:{type:Boolean,default:!1}},data:()=>({pageStatus:!1,footerHeight:50,statusBarHeight:44,headerHeight:44,headerTapNumber:0,fixedTop:0,loadMoreTimer:null,fixedTopMargin:0,scrollTop:0,srcollTimer:null,refreshing:!1,pullingdownVal:0,topTagID:"no"}),watch:{isLoading:function(e){e?this.pageLoadingOpen():this.pageLoadingClose()}},mounted:function(){this.isLoading&&this.pageLoadingOpen();try{var e=f();e.model&&(this.statusBarHeight=e.statusBarHeight)}catch(t){return null}this.customFooter&&setTimeout((()=>{this.getDomSize("guiPageFooter",(e=>{this.footerHeight=e.height}),0)}),200),this.customHeader?setTimeout((()=>{this.getDomSize("guiPageHeader",(e=>{this.headerHeight=e.height,this.$nextTick((()=>{this.pageStatus=!0}))}),0)}),200):this.pageStatus=!0,this.customHeader?setTimeout((()=>{this.getDomSize("guiPageHeader",(e=>{this.fixedTop=e.height}),0)}),200):this.fixedTop=44,setTimeout((()=>{this.getDomSize("guiPageFixedTop",(e=>{this.fixedTopMargin=e.height}),0)}),200)},methods:{onpullingdown:function(e){if(this.apiLoadingStatus)return!1;e.changedTouches=[{pageY:e.pullingDistance}],this.$refs.guiPageRefresh.touchmove(e)},onrefresh:function(){if(this.apiLoadingStatus)return!1;this.refreshing=!0,this.$refs.guiPageRefresh.refreshStatus=2,setTimeout((()=>{this.$refs.guiPageRefresh.rotate360()}),200),this.$emit("reload")},pageLoadingOpen:function(){this.getRefs("guipageloading",0,(e=>{e.open()}))},pageLoadingClose:function(){this.getRefs("guipageloading",0,(e=>{e.close()}))},touchstart:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchstart(e))},touchmove:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchmove(e))},touchend:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchend(e))},scroll:function(e){null!=this.srcollTimer&&clearTimeout(this.srcollTimer),this.srcollTimer=setTimeout((()=>{this.$refs.guiPageRefresh.scroll(e),this.$emit("scroll",e),this.scrollTop=e.detail.scrollTop}),500)},toTop:function(){this.topTagID="guiPageBodyTopTag",setTimeout((()=>{this.topTagID="no"}),500)},endReload:function(){this.$refs.guiPageRefresh.endReload(),this.refreshing=!1},reload:function(){if(this.apiLoadingStatus)return!1;this.$emit("reload"),this.loadmore&&this.$refs.guipageloadmore.stoploadmore()},getDomSize:function(e,t,o){if(o||(o=1),o>=50)return t({width:0,height:0}),!1;c().in(this).select("#"+e).boundingClientRect().exec((s=>null==s[0]||null==s[0].height?(o+=1,void setTimeout((()=>{this.getDomSize(e,t,o)}),50)):void t(s[0])))},stopfun:function(e){return e.stopPropagation(),null},headerTap:function(){this.headerTapNumber++,this.headerTapNumber>=2?(this.$emit("gotoTop"),this.headerTapNumber=0):setTimeout((()=>{this.headerTapNumber=0}),1e3)},getRefs:function(e,t,o){if(t>=50)return o(this.$refs[e]),!1;var s=this.$refs[e];s?o(s):(t++,setTimeout((()=>{this.getRefs(e,t,o)}),100))},loadmorefun:function(){return!!this.loadmore&&(!this.apiLoadingStatus&&(null!=this.loadMoreTimer&&clearTimeout(this.loadMoreTimer),void(this.loadMoreTimer=setTimeout((()=>{if(0!=this.$refs.guipageloadmore.loadMoreStatus)return null;this.$refs.guipageloadmore.loading(),this.$emit("loadmorefun")}),80))))},stopLoadmore:function(){this.$refs.guipageloadmore.stoploadmore()},stoploadmore:function(){this.$refs.guipageloadmore.stoploadmore()},nomore:function(){this.$refs.guipageloadmore.nomore()},toast:function(e){p({title:e,icon:"none"})},resetFooterHeight:function(){this.customFooter&&setTimeout((()=>{this.getDomSize("guiPageFooter",(e=>{this.footerHeight=e.height}),0)}),500)}},emits:["scroll","reload","loadmorefun","gotoTop"]},[["render",function(e,n,u,g,f,c){const p=d,T=x(m("gui-refresh"),F),M=x(m("gui-loadmore"),v),P=S,$=x(m("gui-iphone-bottom"),z),_=x(m("gui-page-loading"),C);return t(),o(p,{style:a({opacity:f.pageStatus?1:0}),class:r(["gui-sbody gui-flex gui-column",[u.fullPage||u.refresh||u.loadmore?"gui-flex1":""]])},{default:s((()=>[u.customHeader?(t(),o(p,{key:0,class:r(["gui-header gui-transition-all",u.headerClass]),id:"guiPageHeader",ref:"guiPageHeader"},{default:s((()=>[i(p,{class:r(["gui-page-status-bar",u.statusBarClass]),style:a({height:f.statusBarHeight+"px"})},{default:s((()=>[y(e.$slots,"gStatusBar")])),_:3},8,["class","style"]),i(p,{class:"gui-flex gui-column gui-justify-content-center",onClick:h(c.headerTap,["stop"])},{default:s((()=>[y(e.$slots,"gHeader")])),_:3},8,["onClick"])])),_:3},8,["class"])):l("",!0),u.customHeader&&u.isHeaderSized?(t(),o(p,{key:1,style:a({height:f.headerHeight+"px"})},null,8,["style"])):l("",!0),u.refresh||u.loadmore?l("",!0):(t(),o(p,{key:2,class:r(["gui-flex gui-column gui-relative",[u.fullPage?"gui-flex1":""]]),id:"guiPageBody",ref:"guiPageBody"},{default:s((()=>[y(e.$slots,"gBody")])),_:3},8,["class"])),u.refresh||u.loadmore?(t(),o(p,{key:3,class:"gui-flex1 gui-relative",id:"guiPageBody",ref:"guiPageBody",style:a({marginTop:f.fixedTopMargin+"px"})},{default:s((()=>[i(P,{class:"gui-absolute-full","scroll-y":!0,"show-scrollbar":!1,onTouchstart:c.touchstart,onTouchmove:c.touchmove,onTouchend:c.touchend,onScroll:c.scroll,"scroll-into-view":f.topTagID,"scroll-with-animation":!1,onScrolltolower:c.loadmorefun},{default:s((()=>[i(p,{id:"guiPageBodyTopTag"},{default:s((()=>[i(T,{ref:"guiPageRefresh",onReload:c.reload,refreshText:u.refreshText,customClass:u.refreshClasses,refreshFontSize:u.refreshFontSize},null,8,["onReload","refreshText","customClass","refreshFontSize"])])),_:1}),y(e.$slots,"gBody"),u.loadmore?(t(),o(p,{key:0},{default:s((()=>[i(M,{ref:"guipageloadmore",status:u.loadMoreStatus,loadMoreText:u.loadMoreText,customClass:u.loadMoreClass,loadMoreFontSize:u.loadMoreFontSize},null,8,["status","loadMoreText","customClass","loadMoreFontSize"])])),_:1})):l("",!0)])),_:3},8,["onTouchstart","onTouchmove","onTouchend","onScroll","scroll-into-view","onScrolltolower"])])),_:3},8,["style"])):l("",!0),u.customFooter?(t(),o(p,{key:4,style:a({height:f.footerHeight+"px"})},null,8,["style"])):l("",!0),u.customFooter?(t(),o(p,{key:5,class:r(["gui-page-footer gui-border-box",u.footerClass]),id:"guiPageFooter",ref:"guiPageFooter"},{default:s((()=>[y(e.$slots,"gFooter"),i($,{need:!u.isSwitchPage,customClass:u.footerSpaceClass},null,8,["need","customClass"])])),_:3},8,["class"])):l("",!0),i(p,{class:r(["gui-page-pendant",u.pendantClass])},{default:s((()=>[y(e.$slots,"gPendant")])),_:3},8,["class"]),i(p,{class:"gui-page-fixed-top",ref:"guiPageFixedTop",id:"guiPageFixedTop",style:a({top:f.fixedTop+"px"})},{default:s((()=>[y(e.$slots,"gFixedTop")])),_:3},8,["style"]),i(_,{ref:"guipageloading"},null,512)])),_:3},8,["style","class"])}]]);export{M as _,x as r};
